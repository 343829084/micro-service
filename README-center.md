micro-service 微服务管理
====

#三个角色

*   微服务----每个实际的业务都是作为一个微服务运行
*   服务中心----记录所有微服务的路由，每个微服务都会定期向服务中心注册自己的服务（成为心跳）
*   服务代理----用户只需要与代理通信，将请求发给代理，代理会与服务中心即微服务通信，自动处理服务路由等问题

#自动服务发现

  每个微服务启动后，会定时向服务中心注册，报告自己的ip、端口、运行的服务。服务中心记录信息，并提供当前所有服务的查询。服务代理会定时与服务中心通信，获取最新的服务列表。当用户请求新服务时，代理能够把请求路由到最新的微服务上。整个过程不需要配置，不需要人工干预。

#高可用
  
  当一个微服务失败时，代理会发现自己的请求失败，他会修改自己的本地服务列表，剔除失败的微服务，然后请求还存活的微服务。服务中心定期清理服务列表数据，由于微服务宕机，因此不再有心跳，因此一小段时间后，服务中心就会将失败的微服务剔除，失败的服务不再对系统产生影响。并且在这个宕机的过程中，用户的请求并没有收到影响。
  
#负载均衡

  服务代理通过自己的本地服务列表找到一个服务名对应的所有微服务，使用round-robin算法将请求转发到微服务上，达到负载均衡。
 
